{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\N00160464\\\\Desktop\\\\CA2_Mo\\\\src\\\\views\\\\books\\\\Show.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport Badge from \"react-bootstrap/Badge\";\nimport Card from \"react-bootstrap/Card\";\nimport Button from \"react-bootstrap/Button\";\nimport Alert from \"react-bootstrap/Alert\";\n\nconst Genre = props => React.createElement(Badge, {\n  variant: \"light\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 9\n  },\n  __self: this\n}, props.genre);\n\nconst Author = props => React.createElement(Badge, {\n  variant: \"light\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10\n  },\n  __self: this\n}, props.author);\n\nexport default class BookShow extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      book: {},\n      show: false,\n      loading: true\n    };\n  }\n\n  componentDidMount() {\n    const id = this.props.match.params.id;\n    axios.get(`http://localhost:4000/books/${id}`).then(response => {\n      console.log(response);\n      this.setState({\n        book: response.data,\n        loading: false\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  delete() {\n    const id = this.props.match.params.id;\n    axios.defaults.headers.common[\"Authorization\"] = localStorage.getItem(\"jwtToken\");\n    axios.delete(`http://localhost:4000/books/${id}`).then(response => {\n      console.log(response);\n      this.setState({\n        book: response.data,\n        loading: false\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n    window.location = \"/\";\n  }\n\n  genreList() {\n    return this.state.book.genre_id.map((currentGenre, index) => {\n      return React.createElement(Genre, {\n        genre: currentGenre.name,\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      });\n    });\n  }\n\n  authorList() {\n    console.log(this.state.author);\n    console.log(this.state.book.author);\n    return this.state.book.author_id.map((currentAuthor, index) => {\n      return React.createElement(Author, {\n        author: currentAuthor.name,\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      });\n    });\n  }\n\n  AlertDismissible() {\n    return React.createElement(React.Fragment, null, React.createElement(Alert, {\n      show: this.state.show,\n      variant: \"secondary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(Alert.Heading, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"Confirm\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Are you sure you want to delete this book - \", this.state.book.title), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"d-flex justify-content-end\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: () => {\n        this.setState({\n          show: false\n        });\n        this.delete();\n      },\n      variant: \"outline-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"Delete\"))));\n  }\n\n  render() {\n    const _this$state = this.state,\n          book = _this$state.book,\n          loading = _this$state.loading,\n          show = _this$state.show;\n\n    if (loading) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"Loading...\"));\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }), React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, this.AlertDismissible(), React.createElement(Card.Header, {\n      as: \"h5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, book.title, \" \", React.createElement(\"span\", {\n      className: \"float-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, this.genreList())), React.createElement(Card.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(Card.Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Synopsis\"), React.createElement(Card.Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"There is no synopsis in the DB\"), React.createElement(Button, {\n      as: Link,\n      to: \"/\",\n      variant: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"View all books\"), React.createElement(Button, {\n      as: Link,\n      onClick: () => {\n        this.setState({\n          show: true\n        });\n      },\n      variant: \"danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Delete\")), React.createElement(Card.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"float-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, this.authorList()))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/N00160464/Desktop/CA2_Mo/src/views/books/Show.js"],"names":["React","Component","axios","Link","Badge","Card","Button","Alert","Genre","props","genre","Author","author","BookShow","constructor","state","book","show","loading","componentDidMount","id","match","params","get","then","response","console","log","setState","data","catch","error","delete","defaults","headers","common","localStorage","getItem","window","location","genreList","genre_id","map","currentGenre","index","name","authorList","author_id","currentAuthor","AlertDismissible","title","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport Badge from \"react-bootstrap/Badge\";\nimport Card from \"react-bootstrap/Card\";\nimport Button from \"react-bootstrap/Button\";\nimport Alert from \"react-bootstrap/Alert\";\n\nconst Genre = props => <Badge variant=\"light\">{props.genre}</Badge>;\nconst Author = props => <Badge variant=\"light\">{props.author}</Badge>;\n\nexport default class BookShow extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      book: {},\n      show: false,\n      loading: true\n    };\n  }\n\n  componentDidMount() {\n    const { id } = this.props.match.params;\n\n    axios\n      .get(`http://localhost:4000/books/${id}`)\n      .then(response => {\n        console.log(response);\n        this.setState({\n          book: response.data,\n          loading: false\n        });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }\n  delete() {\n    const { id } = this.props.match.params;\n\n    axios.defaults.headers.common[\"Authorization\"] = localStorage.getItem(\n      \"jwtToken\"\n    );\n    axios\n      .delete(`http://localhost:4000/books/${id}`)\n      .then(response => {\n        console.log(response);\n        this.setState({\n          book: response.data,\n          loading: false\n        });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n    window.location = \"/\";\n  }\n\n  genreList() {\n    return this.state.book.genre_id.map((currentGenre, index) => {\n      return <Genre genre={currentGenre.name} key={index} />;\n    });\n  }\n  authorList() {\n    console.log(this.state.author);\n    console.log(this.state.book.author);\n    return this.state.book.author_id.map((currentAuthor, index) => {\n      return <Author author={currentAuthor.name} key={index} />;\n    });\n  }\n  AlertDismissible() {\n    return (\n      <>\n        <Alert show={this.state.show} variant=\"secondary\">\n          <Alert.Heading>Confirm</Alert.Heading>\n          <p>\n            Are you sure you want to delete this book - {this.state.book.title}\n          </p>\n          <hr />\n          <div className=\"d-flex justify-content-end\">\n            <Button\n              onClick={() => {\n                this.setState({ show: false });\n                this.delete();\n              }}\n              variant=\"outline-danger\"\n            >\n              Delete\n            </Button>\n          </div>\n        </Alert>\n      </>\n    );\n  }\n\n  render() {\n    const { book, loading, show } = this.state;\n\n    if (loading) {\n      return (\n        <div>\n          <h3>Loading...</h3>\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <br />\n        <Card>\n          {this.AlertDismissible()}\n          <Card.Header as=\"h5\">\n            {book.title} <span className=\"float-right\">{this.genreList()}</span>\n          </Card.Header>\n\n          <Card.Body>\n            <Card.Title>Synopsis</Card.Title>\n            <Card.Text>There is no synopsis in the DB</Card.Text>\n            <Button as={Link} to=\"/\" variant=\"primary\">\n              View all books\n            </Button>\n            <Button\n              as={Link}\n              onClick={() => {\n                this.setState({\n                  show: true\n                });\n              }}\n              variant=\"danger\"\n            >\n              Delete\n            </Button>\n          </Card.Body>\n          <Card.Footer>\n            <span className=\"float-right\">{this.authorList()}</span>\n          </Card.Footer>\n        </Card>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}