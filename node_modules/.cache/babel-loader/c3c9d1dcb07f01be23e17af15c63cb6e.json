{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\N00160464\\\\Desktop\\\\CA2_Mo\\\\src\\\\views\\\\books\\\\Show.js\";\n\n/**\n * @Date:   2020-02-03T10:14:00+00:00\n * @Last modified time: 2020-02-11T20:00:08+00:00\n */\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport Badge from 'react-bootstrap/Badge';\nimport Card from 'react-bootstrap/Card';\nimport Button from 'react-bootstrap/Button';\nimport Alert from 'react-bootstrap/Alert';\n\nconst Genre = props => React.createElement(Badge, {\n  variant: \"light\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 17\n  },\n  __self: this\n}, props.genre);\n\nconst Author = props => React.createElement(Badge, {\n  variant: \"light\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 20\n  },\n  __self: this\n}, props.author);\n\nexport default class BookShow extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      book: {},\n      show: false,\n      loading: true\n    };\n  }\n\n  componentDidMount() {\n    const id = this.props.match.params.id;\n    axios.get(`http://localhost:4000/books/${id}`).then(response => {\n      console.log(response);\n      this.setState({\n        book: response.data,\n        loading: false\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  delete() {\n    const id = this.props.match.params.id;\n    axios.delete(`http://localhost:4000/books/${id}`).then(response => {\n      console.log(response);\n      this.setState({\n        book: response.data,\n        loading: false\n      });\n      window.location = '/';\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  genreList() {\n    return this.state.book.genre_id.map((currentGenre, index) => {\n      return React.createElement(Genre, {\n        genre: currentGenre.name,\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      });\n    });\n  }\n\n  authorList() {\n    console.log(this.state.author);\n    console.log(this.state.book.author);\n    return this.state.book.author_id.map((currentAuthor, index) => {\n      return React.createElement(Author, {\n        author: currentAuthor.name,\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      });\n    });\n  }\n\n  AlertDismissible() {\n    return React.createElement(React.Fragment, null, React.createElement(Alert, {\n      show: this.state.show,\n      variant: \"secondary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(Alert.Heading, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Confirm\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Are you sure you want to delete this book - \", this.state.book.title), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"d-flex justify-content-end\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: () => {\n        this.setState({\n          show: false\n        });\n        this.delete();\n      },\n      variant: \"outline-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Delete\"))));\n  }\n\n  render() {\n    const _this$state = this.state,\n          book = _this$state.book,\n          loading = _this$state.loading,\n          show = _this$state.show;\n\n    if (loading) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Loading...\"));\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, this.AlertDismissible(), React.createElement(Card.Header, {\n      as: \"h5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, book.title, \" \", React.createElement(\"span\", {\n      className: \"float-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, this.genreList())), React.createElement(Card.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(Card.Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Synopsis\"), React.createElement(Card.Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"There is no synopsis in the DB\"), React.createElement(Button, {\n      as: Link,\n      to: \"/\",\n      variant: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"View all books\"), React.createElement(Button, {\n      as: Link,\n      onClick: () => {\n        this.setState({\n          show: true\n        });\n      },\n      variant: \"danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"Delete\")), React.createElement(Card.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"float-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, this.authorList()))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/N00160464/Desktop/CA2_Mo/src/views/books/Show.js"],"names":["React","Component","axios","Link","Badge","Card","Button","Alert","Genre","props","genre","Author","author","BookShow","constructor","state","book","show","loading","componentDidMount","id","match","params","get","then","response","console","log","setState","data","catch","error","delete","window","location","genreList","genre_id","map","currentGenre","index","name","authorList","author_id","currentAuthor","AlertDismissible","title","render"],"mappings":"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","sourcesContent":["/**\n * @Date:   2020-02-03T10:14:00+00:00\n * @Last modified time: 2020-02-11T20:00:08+00:00\n */\n\n\n\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport Badge from 'react-bootstrap/Badge'\nimport Card from 'react-bootstrap/Card'\nimport Button from 'react-bootstrap/Button'\nimport Alert from 'react-bootstrap/Alert'\n\nconst Genre = props => (\n  <Badge variant=\"light\">{props.genre}</Badge>\n)\nconst Author = props => (\n  <Badge variant=\"light\">{props.author}</Badge>\n)\n\n\n\nexport default class BookShow extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      book: {},\n      show: false,\n      loading: true\n    };\n\n  }\n\n  componentDidMount() {\n    const { id } = this.props.match.params;\n\n    axios.get(`http://localhost:4000/books/${id}`)\n    .then(response => {\n      console.log(response);\n      this.setState({\n        book: response.data,\n        loading: false\n      })\n\n    })\n    .catch((error) => {\n      console.log(error);\n    })\n  }\n  delete() {\n    const { id } = this.props.match.params;\n\n    axios.delete(`http://localhost:4000/books/${id}`)\n    .then(response => {\n      console.log(response);\n      this.setState({\n        book: response.data,\n        loading: false\n      })\n      window.location = '/'\n    })\n    .catch((error) => {\n      console.log(error);\n    })\n  }\n\n  genreList() {\n    return this.state.book.genre_id.map((currentGenre, index) => {\n      return <Genre genre={currentGenre.name} key={index} />;\n    })\n  }\n  authorList() {\n    console.log(this.state.author);\n    console.log(this.state.book.author);\n      return this.state.book.author_id.map((currentAuthor, index) => {\n        return <Author author={currentAuthor.name} key={index} />;\n      })\n    }\n   AlertDismissible (){\n     return(\n      <>\n        <Alert show={this.state.show} variant=\"secondary\">\n          <Alert.Heading>Confirm</Alert.Heading>\n          <p>Are you sure you want to delete this book - {this.state.book.title}</p>\n          <hr />\n          <div className=\"d-flex justify-content-end\">\n            <Button onClick={() => {\n              this.setState({ show: false})\n              this.delete()\n          }} \n          variant=\"outline-danger\">\n              Delete\n            </Button>\n          </div>\n        </Alert>\n  \n        \n      </>\n     )\n   }\n \n\n  render() {\n\n    const { book, loading, show } = this.state;\n\n    if (loading) {\n      return (\n      <div>\n        <h3>Loading...</h3>\n      </div>\n      )\n    }\n\n    return (\n    <div>\n    <br/>\n      <Card>\n      {this.AlertDismissible()}\n      <Card.Header as=\"h5\">{book.title} <span className=\"float-right\">{ this.genreList() }</span></Card.Header>\n\n        <Card.Body>\n          <Card.Title>Synopsis</Card.Title>\n          <Card.Text>\n\n            There is no synopsis in the DB\n          </Card.Text>\n          <Button as={Link} to=\"/\" variant=\"primary\">View all books</Button>\n          <Button as={Link} onClick={ ()=>{\n            this.setState({\n              show: true\n            })\n          }} variant=\"danger\">Delete</Button>\n        </Card.Body>\n        <Card.Footer><span className=\"float-right\">{ this.authorList() }</span></Card.Footer>\n      </Card>\n\n    </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}