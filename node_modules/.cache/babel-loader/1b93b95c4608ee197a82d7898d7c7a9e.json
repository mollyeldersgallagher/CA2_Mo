{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\N00160464\\\\Desktop\\\\CA2_Mo\\\\src\\\\views\\\\books\\\\Edit.js\";\n\n/**\r\n * @Date:   2020-01-28T01:14:02+00:00\r\n * @Last modified time: 2020-02-10T12:59:51+00:00\r\n */\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Form from 'react-bootstrap/Form';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Button from 'react-bootstrap/Button';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport Badge from 'react-bootstrap/Badge';\nexport default class BookEdit extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleInputChange = e => {\n      const target = e.target;\n      const value = target.type === 'checkbox' ? target.checked : target.value;\n      const name = target.name;\n      console.log(`Input name ${name}. Input value ${value}.`);\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.onAddGenre = () => {\n      this.setState(state => {\n        const genre = [...state.genre, state.genreText];\n        return {\n          genre,\n          genreText: ''\n        };\n      });\n    };\n\n    this.onAddAuthor = () => {\n      this.setState(state => {\n        const author = [...state.author, state.authorText];\n        return {\n          author,\n          authorText: ''\n        };\n      });\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      const id = this.props.match.params.id;\n      let genreJSON = this.state.genre_id.map((name, index) => {\n        return {\n          name\n        };\n      });\n      let authorJSON = this.state.author_id.map((name, index) => {\n        return {\n          name\n        };\n      });\n      const book = {\n        isbn: this.state.isbn,\n        title: this.state.title,\n        genre_id: this.genreJSON,\n        author_id: this.authorJSON\n      };\n      console.log(book);\n      axios.defaults.headers.common['Authorization'] = localStorage.getItem('jwtToken');\n      axios.put(`http://localhost:4000/books/${id}`, book).then(res => {\n        console.log(res.data);\n        window.location = '/';\n        console.log(book);\n      }).catch(err => {\n        console.log(err); //    window.location = `/books/update/${id}`;\n      }); // window.location = '/';\n    };\n\n    this.state = {\n      isbn: '',\n      title: '',\n      genre_id: [],\n      genreText: '',\n      author_id: [],\n      authorText: ''\n    };\n  }\n\n  componentDidMount() {\n    const id = this.props.match.params.id;\n    console.log(id);\n    axios.defaults.headers.common['Authorization'] = localStorage.getItem('jwtToken');\n    axios.get(`http://localhost:4000/books/${id}`).then(result => {\n      console.log(result);\n      this.setState({\n        isbn: result.data.isbn,\n        title: result.data.title,\n        genre_id: result.data.genre_id,\n        genreText: '',\n        author_id: result.data.author_id,\n        authorText: ''\n      });\n    });\n  }\n\n  // genreList() {\n  //   return this.state.genre.map((currentGenre, index) => {\n  //     return <Genre genre={currentGenre} key={index} />;\n  //   })\n  // }\n  // authorList() {\n  //   return this.state.author.map((currentAuthor, index) => {\n  //     return <Author author={currentAuthor} key={index} />;\n  //   })\n  // }\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Add new Book\"), React.createElement(Form, {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      as: Row,\n      controlId: \"formHorizontalISBN\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      column: true,\n      sm: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"ISBN\"), React.createElement(Col, {\n      sm: 10,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"ISBN\",\n      name: \"isbn\",\n      value: this.state.isbn,\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }))), React.createElement(Form.Group, {\n      as: Row,\n      controlId: \"formHorizontalTitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      column: true,\n      sm: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"Title\"), React.createElement(Col, {\n      sm: 10,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"Title\",\n      name: \"title\",\n      value: this.state.title,\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }))), React.createElement(Form.Group, {\n      as: Row,\n      controlId: \"formHorizontalGenre\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      column: true,\n      sm: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"Genres\"), React.createElement(Col, {\n      sm: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(InputGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"Genre\",\n      name: \"genreText\",\n      value: this.state.genreText,\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }), React.createElement(InputGroup.Append, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.onAddGenre,\n      variant: \"outline-success\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \"Add Genre\"))))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: {\n        span: 10,\n        offset: 2\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      as: Row,\n      controlId: \"formHorizontalAuthor\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      column: true,\n      sm: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \"Author\"), React.createElement(Col, {\n      sm: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(InputGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"Author\",\n      name: \"authorText\",\n      value: this.state.authorText,\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }), React.createElement(InputGroup.Append, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.onAddAuthor,\n      variant: \"outline-success\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \"Add Author\"))))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: {\n        span: 10,\n        offset: 2\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }), React.createElement(Form.Group, {\n      as: Row,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: {\n        span: 10,\n        offset: 2\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, \"Add Book\")))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/N00160464/Desktop/CA2_Mo/src/views/books/Edit.js"],"names":["React","Component","axios","Form","Row","Col","Button","InputGroup","Badge","BookEdit","constructor","props","handleInputChange","e","target","value","type","checked","name","console","log","setState","onAddGenre","state","genre","genreText","onAddAuthor","author","authorText","onSubmit","preventDefault","id","match","params","genreJSON","genre_id","map","index","authorJSON","author_id","book","isbn","title","defaults","headers","common","localStorage","getItem","put","then","res","data","window","location","catch","err","componentDidMount","get","result","render","span","offset"],"mappings":"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","sourcesContent":["/**\r\n * @Date:   2020-01-28T01:14:02+00:00\r\n * @Last modified time: 2020-02-10T12:59:51+00:00\r\n */\r\n\r\n\r\n\r\nimport React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport Form from 'react-bootstrap/Form'\r\nimport Row from 'react-bootstrap/Row'\r\nimport Col from 'react-bootstrap/Col'\r\nimport Button from 'react-bootstrap/Button'\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport Badge from 'react-bootstrap/Badge'\r\n\r\nexport default class BookEdit extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      isbn: '',\r\n      title: '',\r\n      genre_id: [],\r\n      genreText: '',\r\n      author_id: [],\r\n      authorText: ''\r\n    };\r\n\r\n\r\n  }\r\n\r\n  componentDidMount(){\r\n    const { id } = this.props.match.params;\r\n    console.log(id);\r\n\r\n    axios.defaults.headers.common['Authorization'] = localStorage.getItem('jwtToken');\r\n    axios.get(`http://localhost:4000/books/${id}`).then((result) => {\r\n      console.log(result);\r\n      this.setState({\r\n        isbn: result.data.isbn,\r\n        title: result.data.title,\r\n        genre_id: result.data.genre_id,\r\n        genreText: '',\r\n        author_id:result.data.author_id,\r\n        authorText: '',\r\n\r\n      });\r\n    });\r\n  }\r\n\r\n  handleInputChange = e => {\r\n    const target = e.target;\r\n    const value = target.type === 'checkbox' ? target.checked : target.value;\r\n    const name = target.name;\r\n\r\n    console.log(`Input name ${name}. Input value ${value}.`);\r\n\r\n    this.setState({\r\n      [name]: value\r\n    });\r\n  };\r\n\r\n  onAddGenre = () => {\r\n    this.setState(state => {\r\n      const genre = [...state.genre, state.genreText];\r\n      return {\r\n        genre,\r\n        genreText: '',\r\n      };\r\n    });\r\n  };\r\n  onAddAuthor = () => {\r\n   this.setState(state => {\r\n     const author = [...state.author, state.authorText];\r\n     return {\r\n       author,\r\n       authorText: '',\r\n     };\r\n   });\r\n };\r\n\r\n  onSubmit = e => {\r\n\r\n    e.preventDefault();\r\n     const { id } = this.props.match.params;\r\n\r\n    let genreJSON = this.state.genre_id.map((name, index) => {\r\n      return {name};\r\n    })\r\n    let authorJSON = this.state.author_id.map((name, index) => {\r\n      return {name};\r\n    })\r\n\r\n    const book = {\r\n      isbn: this.state.isbn,\r\n      title: this.state.title,\r\n      genre_id: this.genreJSON,\r\n      author_id: this.authorJSON,\r\n\r\n    }\r\n    console.log(book)\r\n\r\n    axios.defaults.headers.common['Authorization'] = localStorage.getItem('jwtToken')\r\n\r\n    axios.put(`http://localhost:4000/books/${id}`, book)\r\n      .then(res => {\r\n        console.log(res.data)\r\n        window.location = '/';\r\n        console.log(book);\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n    //    window.location = `/books/update/${id}`;\r\n    });\r\n\r\n    // window.location = '/';\r\n  };\r\n\r\n\r\n  // genreList() {\r\n  //   return this.state.genre.map((currentGenre, index) => {\r\n  //     return <Genre genre={currentGenre} key={index} />;\r\n  //   })\r\n  // }\r\n  // authorList() {\r\n  //   return this.state.author.map((currentAuthor, index) => {\r\n  //     return <Author author={currentAuthor} key={index} />;\r\n  //   })\r\n  // }\r\n\r\n  render() {\r\n\r\n    return (\r\n    <div>\r\n      <h3>Add new Book</h3>\r\n      <Form onSubmit={this.onSubmit}>\r\n        <Form.Group as={Row} controlId=\"formHorizontalISBN\">\r\n          <Form.Label column sm={2}>\r\n            ISBN\r\n          </Form.Label>\r\n          <Col sm={10}>\r\n            <Form.Control type=\"text\" placeholder=\"ISBN\"\r\n              name=\"isbn\"\r\n              value={this.state.isbn}\r\n              onChange={this.handleInputChange}\r\n            />\r\n          </Col>\r\n        </Form.Group>\r\n\r\n        <Form.Group as={Row} controlId=\"formHorizontalTitle\">\r\n          <Form.Label column sm={2}>\r\n            Title\r\n          </Form.Label>\r\n          <Col sm={10}>\r\n            <Form.Control type=\"text\" placeholder=\"Title\"\r\n              name=\"title\"\r\n              value={this.state.title}\r\n              onChange={this.handleInputChange}\r\n            />\r\n          </Col>\r\n        </Form.Group>\r\n\r\n        <Form.Group as={Row} controlId=\"formHorizontalGenre\">\r\n          <Form.Label column sm={2}>\r\n            Genres\r\n          </Form.Label>\r\n          <Col sm={4}>\r\n            <InputGroup>\r\n              <Form.Control type=\"text\" placeholder=\"Genre\"\r\n                name=\"genreText\"\r\n                value={this.state.genreText}\r\n                onChange={this.handleInputChange}\r\n              />\r\n              <InputGroup.Append>\r\n                <Button onClick={this.onAddGenre} variant=\"outline-success\">Add Genre</Button>\r\n              </InputGroup.Append>\r\n            </InputGroup>\r\n          </Col>\r\n        </Form.Group>\r\n        <Row>\r\n          <Col sm={{ span: 10, offset: 2 }}>\r\n\r\n          </Col>\r\n        </Row>\r\n\r\n        <Form.Group as={Row} controlId=\"formHorizontalAuthor\">\r\n          <Form.Label column sm={2}>\r\n            Author\r\n          </Form.Label>\r\n          <Col sm={4}>\r\n            <InputGroup>\r\n              <Form.Control type=\"text\" placeholder=\"Author\"\r\n                name=\"authorText\"\r\n                value={this.state.authorText}\r\n                onChange={this.handleInputChange}\r\n              />\r\n              <InputGroup.Append>\r\n                <Button onClick={this.onAddAuthor} variant=\"outline-success\">Add Author</Button>\r\n              </InputGroup.Append>\r\n            </InputGroup>\r\n          </Col>\r\n        </Form.Group>\r\n\r\n        <Row>\r\n          <Col sm={{ span: 10, offset: 2 }}>\r\n\r\n          </Col>\r\n        </Row>\r\n\r\n        <br/>\r\n        <Form.Group as={Row}>\r\n          <Col sm={{ span: 10, offset: 2 }}>\r\n            <Button type=\"submit\">Add Book</Button>\r\n          </Col>\r\n        </Form.Group>\r\n      </Form>\r\n    </div>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}